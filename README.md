## Описание проекта

Сервис бронирования переговорных комнат на базе **FastAPI** с **JWT‑авторизацией**.
Поддерживает регистрацию/логин пользователей и создание событий «бронирование переговорки»
с проверкой пересечений и ограничений по времени.

### Используемая архитектура

Проект реализован в стиле **слоёной (layered) архитектуры**:

- **controller (router)**: файлы в `auth/controller` и `booking/controller` содержат FastAPI‑роуты.
  Они принимают HTTP‑запросы, валидируют входные данные через Pydantic‑схемы и вызывают сервисный слой.
- **service**: файлы в `auth/service` и `booking/service` реализуют бизнес‑логику.
  Здесь находятся правила авторизации, проверки пароля, ограничения интервалов бронирования,
  проверка пересечений временных слотов и т.п.
- **repository**: файлы в `auth/repository` и `booking/repository` инкапсулируют доступ к базе данных
  через SQLAlchemy (CRUD‑операции).
- **model**: файлы в `auth/model` и `booking/model` содержат ORM‑модели (отражение таблиц БД).
- **schemas**: файлы в `auth/schemas` и `booking/schemas` содержат Pydantic‑схемы (DTO),
  описывающие формат входящих и исходящих данных API.
- **инфраструктура**: `config.py` (конфигурация, переменные окружения),
  `db_init.py` (инициализация подключения к БД и зависимость `get_db`),
  `main.py` (точка входа, создание объекта FastAPI и подключение роутеров).

Такое разделение позволяет:

- легко изменять бизнес‑логику, не затрагивая контроллеры;
- изолировать работу с БД в одном слое;
- переиспользовать сервисы и репозитории в разных частях приложения;
- улучшить тестопригодность (можно подменять репозитории моками).

### Основные сценарии

- **Регистрация**: `POST /auth/register`
  - тело запроса: e‑mail, полное имя, пароль (и опционально avatar);
  - результат: данные созданного пользователя (без пароля).
- **Логин**: `POST /auth/login`
  - тело запроса: e‑mail и пароль;
  - результат: JWT‑токен (`access_token`), который нужно передавать в заголовке `Authorization: Bearer <token>`.
- **Текущий пользователь**: `GET /auth/me`
  - требует валидный JWT‑токен;
  - возвращает данные аутентифицированного пользователя.
- **Создание бронирования**: `POST /bookings/`
  - требует валидный JWT‑токен;
  - тело запроса: `guest_name`, `room_number`, `check_in`, `check_out` (ISO‑формат даты/времени);
  - правила:
    - минимальный интервал бронирования — **30 минут**;
    - максимальный интервал — **24 часа**;
    - брони **не должны пересекаться** по времени для одной и той же комнаты.
- **Список бронирований**: `GET /bookings/`
  - возвращает список всех бронирований.

### Запуск проекта

1. Установить зависимости (через `uv` или `pip`, в зависимости от окружения):

   ```bash
   pip install -e .
   ```

2. Настроить переменные окружения (например, в `.env`):

   ```env
   DB_USER=...
   DB_PASSWORD=...
   DB_HOST=localhost
   DB_PORT=5432
   DB_NAME=booking_db

   JWT_SECRET_KEY=your_secret_key
   JWT_ALGORITHM=HS256
   JWT_EXPIRE_MINUTES=60
   ```

3. Запустить сервер разработки:

   ```bash
   uvicorn main:app --reload
   ```

4. Документация OpenAPI будет доступна по адресу:

   - Swagger UI: `http://localhost:8000/docs`
   - ReDoc: `http://localhost:8000/redoc`
